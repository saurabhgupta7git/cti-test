<!DOCTYPE html>
<html>
<head>
  <title>Fake CTI</title>
</head>
<body>
  <h2>Simulate CTI Call</h2>
  <button onclick="sendFakeCall()">Send CALL_INITIATED</button>

  <script>
    function sendFakeCall() {
      const message = {
        source: 'FakeCTI',
        type: 'CALL_INITIATED',
        payload: {
          caseSubject: 'Test Support Call',
          caseOrigin: 'Web',
          caseStatus: 'New'
        }
      };
      const cleanMessage = JSON.stringify(message);
      const parentOrigin = document.referrer
      ? new URL(document.referrer).origin
      : '*';
      console.log('Sending message to parent origin:', parentOrigin);
      window.parent.postMessage(cleanMessage, 'https://connect-saas-7933-dev-ed.scratch.lightning.force.com');
      //window.parent.postMessage(cleanMessage, '*');
      alert('Event sent to Salesforce');
    }
  </script>
</body>
</html>
